# Totally Concave Regression
This repository contains the code for reproducing all numerical 
experiments in the paper 
[Totally Concave Regression](https://arxiv.org/abs/2501.04360). 
All R scripts for the experiments are located in `code`, along with 
the shell scripts used to run them on our server. You may run 
experiments for all datasets at once using the master shell script 
`run_all_analyses.sh`, or run experiments for each dataset separately 
using their corresponding shell scripts—`run_all_analyses_for_ex1029.sh`, 
`run_all_analyses_for_hprice.sh`, and 
`run_all_analyses_for_401ksubs.sh`—located in each dataset's directory 
under `code`. The role of each R script is described below. Running 
these R scripts requires the R package `regmdc`. Installation 
instructions can be found on the package's GitHub 
[page](https://github.com/DohyeongKi/regmdc). All experiments in the 
paper were conducted using version 0.8.1 of the package. The results 
and plots generated by the experiments are also stored in `results` 
and `plots`. In addition, our implementation of axially concave 
regression is available in `code/axcon`.


## R Script and R Markdown Descriptions by Dataset

### Earnings Dataset 
- **`ex1029_rep.R`**: Runs the main experiment for this dataset. It can 
be executed individually using `ex1029_rep.sh`. The experiment results 
are saved in `results/ex1029`.
- **`ex1029_rank_plot.Rmd`**: Generates the plots of the 
best/worst-performing and top/bottom two ratios (Figure 2 in Section 
9.1 and Figure 7 in the supplementary material), and the plots of 
empirical cumulative distributions of the ranks (Figure 8 in the 
supplementary material). The generated plots are saved in 
`plots/ex1029`.

### Housing Price Dataset
- **`hprice_rep.R`** and **`hprice_mod_rep.R`**: Run the main 
experiment for this dataset. `hprice_mod_rep.R` analyzes the 
regularized variants, and `hprice_rep.R` analyzes all the other 
models. They can be executed individually using `hprice_rep.sh` and 
`hprice_mod_rep.sh`. The experiment results are saved in 
`results/hprice`. 
- **`hprice_rank_plot.Rmd`**: Using the main experiment results, 
generates the plots of the empirical cumulative distributions of the 
ranks (Figures 3 and 5 in Section 9.2). The generated plots are saved 
in `plots/hprice`.
- **`hprice_single.R`**: Fits each model to a single training set 
to examine more closely the cases where overfitting occurs. It can 
be executed individually by using `hprice_single.sh`. The results 
are saved in `results/hprice`.
- **`hprice_plot.R`**: Produces 3D visualizations of the fits 
generated by `hprice_single.R` (Figure 4 in Section 9.2). The plot is 
saved in `plots/hprice`.

### Retirement Saving Plan (401(k)) Dataset
- **`401ksubs_rep.R`** and **`401ksubs_mod_rep.R`**: Run the main 
experiment for this dataset. They can be executed individually using 
`401ksubs_rep.sh` and `401ksubs_mod_rep.sh`. The results are saved in 
`results/401ksubs`.
- **`401ksubs_rank_plot.Rmd`**: Generates the plot of the empirical 
cumulative distributions of the ranks (Figure 6 in Section 9.3). 
The plot is saved in `plots/401ksubs`.